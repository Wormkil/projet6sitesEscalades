<!doctype html>
<html lang="fr" xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <link href="/css/tailwind.css" rel="stylesheet">
  <title>Amis de l'Escalade</title>

</head>

<body class="bg-gray-100">
<div class="bg-gray-100">
    <!-- Insertion du header -->
    <section class="mb-28 sm:mb-44"> <!-- Quick fix pour la NavBar Fixé -->
        <div th:insert="fragments/header :: header"></div>
    </section>

    <main>
        <form class="bg-white shadow-lg rounded-3xl m-2 p-0.5"
              method="post" modelAttribute="user" th:action="@{/mon-compte-informations-sauvegardé}" th:object="${user}">
            <section class="m-2 grid grid-cols-2 gap-2 items-center rounded-3xl shadow-inner bg-gray-100">
                <input class="hidden" th:id="id" th:name="id" th:value="${user.id}">
                <input class="hidden" th:id="officialMember" th:name="officialMember" th:value="${user.officialMember}">
                <input class="hidden" th:id="passwordConfirm" th:name="passwordConfirm" th:value="${user.passwordConfirm}">
                <h1 class="text-2xl font-bold text-white col-span-2 bg-blue-600 shadow-md rounded-t-3xl p-2">Vos informations de connexion :</h1>
                <h3 class="text-lg font-semibold text-right">Adresse Email :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2 truncate" readonly
                    th:id="email" th:name="email" th:value="${user.email}">
                <h3 class="text-lg font-semibold text-right">Mot de passe :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2" readonly th:id="password"
                    th:name="password" th:value="${user.password}" type="password">
            </section>

            <section class="m-2 grid grid-cols-2 gap-2 items-center rounded-3xl shadow-inner bg-gray-100">
                <h1 class="text-2xl font-bold col-span-2 text-white shadow-md rounded-t-3xl bg-purple-600 p-2">Vos informations personnelles :</h1>
                <h3 class="text-lg font-semibold text-right">Pseudo ou Nom d'utilisateur :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2" readonly
                    th:id="userName" th:name="userName" th:value="${user.userName}">
                <h3 class="text-lg font-semibold text-right">Identité :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2" readonly
                    th:id="fullName"  th:name="fullName" th:value="${user.fullName}">
                <h3 class="text-lg font-semibold text-right">Pays :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2" readonly
                    th:id="country" th:name="country" th:value="${user.country}">
                <h3 class="text-lg font-semibold text-right">Membre depuis :</h3>
                <input class="text-lg font-semibold bg-gray-200 rounded-md p-2" readonly
                    th:id="creationAccount" th:name="creationAccount" th:value="${user.creationAccount}">
            </section>
            <div class="hidden grid grid-cols-2 gap-2 my-2">
                <h3 class="col-span-1"></h3>
                <div class="col-span-1 grid grid-cols-2">
                    <h3 class="col-span-1"></h3>
                    <button class="col-span-1 flex justify-center p-2 border border-transparent self-end mr-2
                      text-sm font-medium rounded-xl text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2
                      focus:ring-offset-2 focus:ring-indigo-500 " title="Sauvegarder les modifications des informations" type="submit">
                        <img src="https://img.icons8.com/ios-glyphs/30/ffffff/save--v1.png"/>
                    </button>
                </div>

            </div>
        </form>


        <section class="bg-white shadow-lg rounded-3xl m-2 p-0.5">

            <div class="m-2 gap-2 items-center rounded-3xl shadow-inner bg-white">
                <div class="grid grid-cols-6 gap-x-4 gap-y-1 mb-2">
                    <h1 class="text-2xl font-bold col-span-6 text-white shadow-md rounded-t-3xl bg-pink-600 p-2">Vos Topos :</h1>
                </div>

                <div th:if="${savedTopo == 'good'}">
                    <div class="flex justify-center items-center my-2 font-medium py-1 px-2 bg-white rounded-md text-green-700
                      bg-green-100 border border-green-300 ">
                        <div slot="avatar">
                            <svg class="feather feather-alert-octagon w-5 h-5 mx-2" fill="none" height="100%" stroke="currentColor" stroke-linecap="round"
                                 stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="100%"
                                 xmlns="http://www.w3.org/2000/svg">
                                <polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>
                                <line x1="12" x2="12" y1="8" y2="12"></line>
                                <line x1="12" x2="12.01" y1="16" y2="16"></line>
                            </svg>
                        </div>
                        <h3 class="font-normal  max-w-full flex-initial">
                           Modification du topo Sauvegardé !
                        </h3>
                    </div>
                </div>
                <div th:if="${savedTopo == 'error'}">
                    <div class="flex justify-center items-center my-2 font-medium py-1 px-2 bg-white rounded-md text-red-700
                      bg-red-100 border border-red-300 ">
                        <div slot="avatar">
                            <svg class="feather feather-alert-octagon w-5 h-5 mx-2" fill="none" height="100%" stroke="currentColor" stroke-linecap="round"
                                 stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="100%"
                                 xmlns="http://www.w3.org/2000/svg">
                                <polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>
                                <line x1="12" x2="12" y1="8" y2="12"></line>
                                <line x1="12" x2="12.01" y1="16" y2="16"></line>
                            </svg>
                        </div>
                        <h3 class="font-normal  max-w-full flex-initial">
                            Le nom que vous souhaitez donné à votre topo est déja pris. Veillez à en choisir un autre.
                        </h3>
                    </div>
                </div>

                <div th:each="unTopo, iStat : ${topos}">
                    <form class="bg-gray-200 rounded-3xl shadow-lg mb-4" method="post"
                            modelAttribute="topo" th:action="@{/mon-compte(page=${currentPage})}" th:if="${unTopo.beingReserved == 'false'}" th:object="${topo}">
                        <div class="grid grid-cols-4 md:grid-cols-8 gap-1 mb-2 items-start">
                            <input class="hidden" th:id="id" th:name="id" th:value="${unTopo.id}">
                            <input class="hidden" th:id="releaseDate" th:name="releaseDate" th:value="${unTopo.releaseDate}">
                            <input class="hidden" th:id="authorId" th:name="authorId" th:value="${unTopo.authorId}">

                            <style>
                          /* CHECKBOX TOGGLE SWITCH */
                          /* @apply rules for documentation, these do not work as inline style */
                          .toggle-checkbox:checked {
                            @apply: right-0 border-green-600;
                            right: 0;
                            border-color: #059669;
                          }
                          .toggle-checkbox:checked + .toggle-label {
                            @apply: bg-green-600;
                            background-color: #059669;
                          }
                      </style>
                            <div class="col-span-1 flex items-center justify-center shadow-md h-full w-full
                                            rounded-br-3xl rounded-tl-3xl bg-red-600">
                                <div class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                                    <input class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" th:checked="${unTopo.available}"
                                           th:id="available" th:name="available" th:value="${unTopo.available}" type="checkbox">
                                    <label class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                            </div>
                            <h3 class="col-span-3 md:col-span-7 font-semibold self-center text-left">Disponibilité du topo</h3>

                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-bold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-4 md:col-span-8 lg:col-span-4 text-lg capitalize underline"
                                   th:id="name" th:name="name" th:value="${unTopo.name}" type="text"/>
                            <div class="hidden lg:block col-span-2"></div>

                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center truncate col-span-4 md:col-span-8"
                                   th:id="description" th:name="description" th:value="${unTopo.description}" type="text"/>
                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-3 md:col-span-7 lg:col-span-4 text-md italic"
                                   th:id="localisation" th:name="localisation" th:value="${unTopo.localisation}" type="text"/>
                            <div class="hidden lg:block col-span-1"></div>
                            <button class="col-span-1 flex justify-center self-end shadow-md
                                            rounded-br-3xl rounded-tl-3xl bg-red-600 hover:bg-red-700 "
                                    title="Sauvegarder les modifications du topos" type="submit">
                                <img src="https://img.icons8.com/ios-glyphs/30/ffffff/save--v1.png"/>
                            </button>
                        </div>
                    </form>
                    <form class="bg-yellow-200 rounded-3xl shadow-lg mb-4" method="post"
                          modelAttribute="topo" th:action="@{/mon-compte(page=${currentPage})}" th:if="${unTopo.beingReserved == 'true' and unTopo.reserved == 'false'}" th:object="${topo}">
                        <div class="grid grid-cols-4 md:grid-cols-8 gap-1 mb-2 items-start">
                            <input class="hidden" th:id="id" th:name="id" th:value="${unTopo.id}">
                            <input class="hidden" th:id="releaseDate" th:name="releaseDate" th:value="${unTopo.releaseDate}">
                            <input class="hidden" th:id="authorId" th:name="authorId" th:value="${unTopo.authorId}">

                            <style>
                          /* CHECKBOX TOGGLE SWITCH */
                          /* @apply rules for documentation, these do not work as inline style */
                          .toggle-checkbox:checked {
                            @apply: right-0 border-green-600;
                            right: 0;
                            border-color: #059669;
                          }
                          .toggle-checkbox:checked + .toggle-label {
                            @apply: bg-green-600;
                            background-color: #059669;
                          }
                      </style>
                            <div class="col-span-1 flex items-center justify-center shadow-md h-full w-full
                                            rounded-br-3xl rounded-tl-3xl bg-red-600">
                                <div class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                                    <h3 class="font-bold text-xl text-white">NON</h3>
                                </div>
                            </div>
                            <h3 class="col-span-2 md:col-span-6 font-bold text-lg text-self-center text-center">Acceptez-vous la demande de reservation ?</h3>
                            <a class="col-span-1 flex items-center justify-center shadow-md h-full w-full
                                            rounded-tr-3xl rounded-bl-3xl bg-green-600" th:href="@{~/mon-compte-demande-accepte(idTopo=${unTopo.id},page=1)}"><div>
                                <div class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                                    <h3 class="font-bold text-xl text-white">OUI</h3>
                                </div>
                            </div></a>

                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-bold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-4 md:col-span-8 lg:col-span-4 text-lg capitalize underline"
                                   readonly th:id="name" th:name="name" th:value="${unTopo.name}" type="text"/>
                            <div class="hidden lg:block col-span-2"></div>

                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center truncate col-span-4 md:col-span-8"
                                   readonly th:id="description" th:name="description" th:value="${unTopo.description}" type="text"/>

                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-4 md:col-span-8 lg:col-span-4 text-md italic"
                                   readonly th:id="localisation" th:name="localisation" th:value="${unTopo.localisation}" type="text"/>
                            <div class="hidden lg:block col-span-1"></div>

                        </div>
                    </form>
                    <form class="bg-red-200 rounded-3xl shadow-lg mb-4" method="post"
                          modelAttribute="topo" th:action="@{/mon-compte(page=${currentPage})}" th:if="${unTopo.beingReserved == 'true' and unTopo.reserved == 'true'}" th:object="${topo}">
                        <div class="grid grid-cols-4 md:grid-cols-8 gap-1 mb-2 items-start">
                            <input class="hidden" th:id="id" th:name="id" th:value="${unTopo.id}">
                            <input class="hidden" th:id="releaseDate" th:name="releaseDate" th:value="${unTopo.releaseDate}">
                            <input class="hidden" th:id="authorId" th:name="authorId" th:value="${unTopo.authorId}">

                            <style>
                          /* CHECKBOX TOGGLE SWITCH */
                          /* @apply rules for documentation, these do not work as inline style */
                          .toggle-checkbox:checked {
                            @apply: right-0 border-green-600;
                            right: 0;
                            border-color: #059669;
                          }
                          .toggle-checkbox:checked + .toggle-label {
                            @apply: bg-green-600;
                            background-color: #059669;
                          }
                      </style>
                            <div class="col-span-1 flex items-center justify-center shadow-md h-full w-full
                                            rounded-br-3xl rounded-tl-3xl bg-red-600">
                                <div class="relative inline-block w-10 align-middle select-none transition duration-200 ease-in">
                                    <input class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer" th:checked="${unTopo.available}"
                                           th:id="available" th:name="available" th:value="${unTopo.available}" type="checkbox">
                                    <label class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                                </div>
                            </div>
                            <h3 class="col-span-3 md:col-span-7 font-semibold self-center text-left">Disponibilité du topo</h3>

                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-bold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-4 md:col-span-8 lg:col-span-4 text-lg capitalize underline"
                                   readonly th:id="name" th:name="name" th:value="${unTopo.name}" type="text"/>
                            <div class="hidden lg:block col-span-2"></div>

                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center truncate col-span-4 md:col-span-8"
                                   readonly th:id="description" th:name="description" th:value="${unTopo.description}" type="text"/>
                            <div class="hidden lg:block col-span-2"></div>
                            <input class="font-semibold bg-gray-100 rounded-md p-2 text-center self-start truncate col-span-3 md:col-span-7 lg:col-span-4 text-md italic"
                                   readonly th:id="localisation" th:name="localisation" th:value="${unTopo.localisation}" type="text"/>
                            <div class="hidden lg:block col-span-1"></div>
                            <button class="col-span-1 flex justify-center self-end shadow-md
                                            rounded-br-3xl rounded-tl-3xl bg-red-600 hover:bg-red-700 "
                                    title="Sauvegarder les modifications du topos" type="submit">
                                <img src="https://img.icons8.com/ios-glyphs/30/ffffff/save--v1.png"/>
                            </button>
                        </div>
                    </form>

                </div>

                <div class="mt-4 flex flex-row justify-end gap-1 items-center" >
                    <th:block th:each="pageTopo, iStat: ${listPage}" th:if="${pageTopo != 0}">
                        <div th:if="${iStat.first}">
                            <a class="text-blue-500" th:href="@{/mon-compte(page=${currentPage-1})}" th:if="${currentPage > 1}">
                                <svg class="bi bi-caret-left-fill" fill="currentColor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/>
                                </svg>
                            </a>
                        </div>

                        <div th:if="${currentPage != pageTopo}">
                            <a class="text-blue-500" th:href="@{/mon-compte(page=${pageTopo})}"> [[${pageTopo}]]</a><br/>
                        </div>
                        <div th:unless="${currentPage != pageTopo}">
                            <a class="text-blue-500 font-semibold underline" th:href="@{/mon-compte(page=${pageTopo})}"> [[${pageTopo}]]</a><br/>
                        </div>

                        <div th:if="${iStat.last}">
                            <a class="text-blue-500" th:href="@{/mon-compte(page=${currentPage+1})}" th:if="${pageTopo != currentPage}">
                                <svg class="bi bi-caret-right-fill" fill="currentColor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                </svg>
                            </a>
                        </div>
                    </th:block>
                </div>


            </div>
        </section>
    </main>


  <section>
      <!--Insertion du footer -->
    <div class="mt-4" th:insert="fragments/footer :: footer"></div>
  </section>


</div>
</body>
</html>